<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='An article to show the procedure to start a game powered by Unreal Engine.'><title>UE Framework-From int main() to BeginPlay()</title>

<link rel='canonical' href='https://PureWhite216.github.io/p/ue-framework-from-int-main-to-beginplay/'>

<link rel="stylesheet" href="/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css"><meta property='og:title' content='UE Framework-From int main() to BeginPlay()'>
<meta property='og:description' content='An article to show the procedure to start a game powered by Unreal Engine.'>
<meta property='og:url' content='https://PureWhite216.github.io/p/ue-framework-from-int-main-to-beginplay/'>
<meta property='og:site_name' content='NekoRAM7'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='GameDev' /><meta property='article:tag' content='UnrealEngine' /><meta property='article:published_time' content='2022-05-11T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-05-11T00:00:00&#43;00:00'/><meta property='og:image' content='https://PureWhite216.github.io/p/ue-framework-from-int-main-to-beginplay/Image.jpg' />
<meta name="twitter:title" content="UE Framework-From int main() to BeginPlay()">
<meta name="twitter:description" content="An article to show the procedure to start a game powered by Unreal Engine."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://PureWhite216.github.io/p/ue-framework-from-int-main-to-beginplay/Image.jpg' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huf813368b84502cf445c57ab367bb41e8_312312_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">NekoRAM7</a></h1>
            <h2 class="site-description">An Idie Game Developer.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/7829718'
                        target="_blank"
                        title="Bilibili"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M7.172 2.757L10.414 6h3.171l3.243-3.242a1 1 0 0 1 1.415 1.415l-1.829 1.827L18.5 6A3.5 3.5 0 0 1 22 9.5v8a3.5 3.5 0 0 1-3.5 3.5h-13A3.5 3.5 0 0 1 2 17.5v-8A3.5 3.5 0 0 1 5.5 6h2.085L5.757 4.171a1 1 0 0 1 1.415-1.415zM18.5 8h-13a1.5 1.5 0 0 0-1.493 1.356L4 9.5v8a1.5 1.5 0 0 0 1.356 1.493L5.5 19h13a1.5 1.5 0 0 0 1.493-1.356L20 17.5v-8A1.5 1.5 0 0 0 18.5 8zM8 11a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1zm8 0a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1z"/>
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/PureWhite216'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://PureWhite216.github.io/" selected>English</option>
                        
                            <option value="https://PureWhite216.github.io/zh-cn/" >‰∏≠Êñá</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/ue-framework-from-int-main-to-beginplay/">
                <img src="/p/ue-framework-from-int-main-to-beginplay/Image_huaf34fbf3356fec395b028e0610cff063_171909_800x0_resize_q75_box.jpg"
                        srcset="/p/ue-framework-from-int-main-to-beginplay/Image_huaf34fbf3356fec395b028e0610cff063_171909_800x0_resize_q75_box.jpg 800w, /p/ue-framework-from-int-main-to-beginplay/Image_huaf34fbf3356fec395b028e0610cff063_171909_1600x0_resize_q75_box.jpg 1600w"
                        width="800" 
                        height="305" 
                        loading="lazy"
                        alt="Featured image of post UE Framework-From int main() to BeginPlay()" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/unrealengine/" >
                UnrealEngine
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/ue-framework-from-int-main-to-beginplay/">UE Framework-From int main() to BeginPlay()</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            An article to show the procedure to start a game powered by Unreal Engine.
        </h3>
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 11, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    7 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>This article offers an insight into the framework of UE, by analyizng the steps to take when an UE game is launched.</p>
<h2 id="game-loop">Game Loop</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// A simplified Game Loop
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">init</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">g_exit_requested</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">poll_input</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">update</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">render</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">shutdown</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="launch">Launch</h2>
<p>The game launches via the launch file of the specific platform.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Simplified launch.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&#34;LaunchEngineLoop.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">FEngineLoop</span> <span class="n">GEngineLoop</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">GIsRequestingExit</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">int32</span> <span class="nf">GuardedMain</span><span class="p">(</span><span class="k">const</span> <span class="n">TCHAR</span><span class="o">*</span> <span class="n">CmdLine</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Run early Initialization, load engine modules
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">int32</span> <span class="n">ErrorLevel</span> <span class="o">=</span> <span class="n">GEngineLoop</span><span class="p">.</span><span class="n">PreInit</span><span class="p">(</span><span class="n">CmdLine</span><span class="p">);</span> <span class="c1">// Most modules are loaded in PreInit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">ErrorLevel</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">GisRequestingExit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ErrorLevel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Create and initialize a UEngine, run late initialization, start the game
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ErrorLevel</span> <span class="o">=</span> <span class="n">GEngineLoop</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Every frame: kick off rendering, tick the engine, update RHI
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">GIsRequestingExit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">GEngineLoop</span><span class="p">.</span><span class="n">Tick</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Run cleanup and exit when requested
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">GEngineLoop</span><span class="p">.</span><span class="n">Exit</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ErrorLevel</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="genginelooppreinit">`GEngineLoop.PreInit()</h2>
<p>The source code is divided into modules.<br>
A module system helps ensure that dependencies between different parts of the source code are manageable and that only the required modules are loaded.
<img src="/p/ue-framework-from-int-main-to-beginplay/1.JPG"
	width="1741"
	height="1057"
	srcset="/p/ue-framework-from-int-main-to-beginplay/1_huaf34fbf3356fec395b028e0610cff063_235587_480x0_resize_q75_box.JPG 480w, /p/ue-framework-from-int-main-to-beginplay/1_huaf34fbf3356fec395b028e0610cff063_235587_1024x0_resize_q75_box.JPG 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="164"
		data-flex-basis="395px"
	
></p>
<p>In the <code>PreInit</code> of the game loop, some basic modules are loaded in preparation for subsequent initialization, such as defining primitive types.</p>
<h3 id="load-sequence">Load SequenceÔºö</h3>
<h4 id="1-loadcoremodules">1. LoadCoreModules</h4>
<p>CoreUObject</p>
<h4 id="2-loadpreinitmodules">2. LoadPreInitModules</h4>
<p>Engine
Renderer
Rendering APIs
AnimGraphRuntime
SlateRHIRenderer
Landscape
RenderCore</p>
<h4 id="3-project--plugin-early-loading">3. Project &amp; Plugin (Early Loading)</h4>
<h4 id="4-loadstartupcoremodules">4. LoadStartupCoreModules</h4>
<p>Core
Networking
XAudio2
Messaging
Slate
UMG
Overlay
ClothingSystemRuntimeNv
PacketHandler
&hellip;</p>
<h4 id="5-project--plugin-default-point">5. Project &amp; Plugin (Default Point)</h4>
<p>GamePlay Codes</p>
<h3 id="module-loading-process">Module Loading Process</h3>
<ol>
<li>First, the engine registers all the <code>UObject</code> classes defined in the module, which are known by the reflection system, and constructs a <code>Class Default Object</code> (CDO) for each Class. The CDO is a record of the default state of the class and serves as a prototype for subsequent inheritance. The engine circulates the CDO, runs its constructor, and passes the parent class&rsquo;s CDO as a template. Therefore there should be no Gameplay code in the constructor.</li>
<li>Second, the engine calls module&rsquo;s <code>StartupModule</code> function, which corresponds to <code>ShutdownModule</code> to perform the required initialization during module&rsquo;s lifetime.</li>
</ol>
<p>To sum up, <code>GEngineLoop.PreInit()</code> loads the basic system, engine blocks, gameplay code, and plug-in modules, all of which are required for subsequent initialization.</p>
<h2 id="gengineloopinit">GEngineLoop.Init()</h2>
<h3 id="create-instance-of-ugameengine">Create Instance of UGameEngine</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">GEngine</span> <span class="o">=</span> <span class="n">NewObject</span><span class="o">&lt;</span><span class="n">UEngine</span><span class="o">&gt;</span><span class="p">(</span><span class="n">GetTransientPackage</span><span class="p">(),</span> <span class="n">EngineClass</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The engine firstly checks the configuration to decide use which class, then creates the instance <code>GEngine</code> of the class as global <code>UGameEngine</code> instance.<br>
<code>GEngine</code> is declared in <code>Engine/Engine.h</code>.</p>
<h3 id="initialize-gengine">Initialize GEngine</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Initialize the engine: this creates UGameInstance and UGameViewPortClient
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">ParseCommandline</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">Init</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">FCoreDelegates</span><span class="o">::</span><span class="n">OnPostEngineInit</span><span class="p">.</span><span class="n">Broadcas</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>When <code>GEngine</code> is initialized, a global delegate is fired to indicate that the Engine is now initialized.</p>
<h3 id="initialize-any-late-loaded-modules">Initialize any late-loaded modules</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Initialize any late-loaded modules
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">IProjectManager</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">LoadModulesForProject</span><span class="p">(</span><span class="n">EloadingPhase</span><span class="o">::</span><span class="n">PostEngineInit</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">IPluginManager</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">LoadMoudlesForEnabledPlugings</span><span class="p">(</span><span class="n">EloadingPhase</span><span class="o">::</span><span class="n">PostEngineInit</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The engine loads any project or plugin modules that have been configured for late loading.</p>
<p>Now, the engine is started and initialization is complete.</p>
<h3 id="load-map">Load Map</h3>
<p><code>UEngine</code> class enables user to load into a map and start playing.<br>
The Engine is able to browse to an URL, which can represent either a server address to connect to as a client, or the name of a map to load up locally.</p>
<h2 id="engine-initialization">Engine Initialization</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// In GameEngine.cppÔºõ UGameEngine::Init()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Load and apply user game settings
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">GetGameUserSettings</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">LoadSettings</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">GetGameUserSettings</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ApplyNonResolutionSettings</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create UGameInstance, UGameViewportClient and ULocalPlayer 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Create an UGameInstance using the class specified by project config
</span></span></span><span class="line"><span class="cl"><span class="c1">// After UE4.4, UGameInstance was spun off from the UGameEngine class to handle some of the more project-specific functionality.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">FSoftClassPath</span> <span class="n">GameInstanceClassName</span> <span class="o">=</span> <span class="n">GetDefault</span><span class="o">&lt;</span><span class="n">UGameMapsSettings</span><span class="o">&gt;</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GameInstanceClass</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">UClass</span><span class="o">*</span> <span class="n">GameInstanceClass</span> <span class="o">=</span> <span class="n">LoadObject</span><span class="o">&lt;</span><span class="n">UClass</span><span class="o">&gt;</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="o">*</span><span class="n">GameInstanceClassName</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="n">GameInstance</span> <span class="o">=</span> <span class="n">NewObject</span><span class="o">&lt;</span><span class="n">UGameInstance</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">GameInstanceClass</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create FWorldContext and dummy UWorld; initialize subsystems
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">GameInstance</span><span class="o">-&gt;</span><span class="n">InitializeStandalone</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create an UGameViewportClient and initialize it
</span></span></span><span class="line"><span class="cl"><span class="c1">// UGameViewportClient is essentially a high-level interface for the rendering, audio, and input systems, which is between UEngine and ULocalPlayer.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">UGameViewportCLient</span><span class="o">*</span> <span class="n">ViewportClient</span> <span class="o">=</span> <span class="n">NewObject</span><span class="o">&lt;</span><span class="n">UGameViewportClient</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">GameViewportClientClass</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ViewportClient</span><span class="o">-&gt;</span><span class="n">Init</span><span class="p">(</span><span class="o">*</span><span class="n">GameInstance</span><span class="o">-&gt;</span><span class="n">GetWorldContext</span><span class="p">(),</span> <span class="n">GameInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">GameViewport</span> <span class="o">=</span> <span class="n">ViewportClient</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">GameInstance</span><span class="o">-&gt;</span><span class="n">GetWorldContext</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GameViewport</span> <span class="o">=</span> <span class="n">ViewportClient</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">CreateGameViewport</span><span class="p">(</span><span class="n">ViewportClient</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Create a ULocalPlayer and associate it with the view client
</span></span></span><span class="line"><span class="cl"><span class="c1">// ULocalPlayer represents the user who is sitting in front of the screen
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">FString</span> <span class="n">Error</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">ViewportClient</span><span class="o">-&gt;</span><span class="n">SetupInitalLocalPlayer</span><span class="p">(</span><span class="n">Error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">UGameViewportClient</span><span class="o">::</span><span class="n">OnviewportCreated</span><span class="p">().</span><span class="n">Broadcast</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now, we have an <code>UGameEngine</code>, an <code>UGameInstance</code>, an <code>UGameViewportClient</code> and an <code>ULocalPlayer</code>. The game is ready to start.</p>
<h3 id="load-map-1">Load Map</h3>
<p><img src="/p/ue-framework-from-int-main-to-beginplay/2.JPG"
	width="1737"
	height="957"
	srcset="/p/ue-framework-from-int-main-to-beginplay/2_huaf34fbf3356fec395b028e0610cff063_142680_480x0_resize_q75_box.JPG 480w, /p/ue-framework-from-int-main-to-beginplay/2_huaf34fbf3356fec395b028e0610cff063_142680_1024x0_resize_q75_box.JPG 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="435px"
	
></p>
<p>After Engine&rsquo;s initialization, <code>UEngine::LoadMap</code> is called.<br>
By the end of <code>LoadMap</code>, we will have <code>UWorld</code> that containts all the actors saved into the map and a handful of newly-spawned actors that form the core of the GameFramework, including <code>GameMode</code>, <code>GameSession</code>, <code>GameState</code>, <code>PlayerController</code>, <code>PlayerState</code> and <code>Pawn</code>.</p>
<p>One of the key factors that separates these 2 sets of objexts is lifetime. Everything created before <code>LoadMap</code> is tied to the lifetime of the process. While things like <code>GameMdoe</code> are created after <code>LoadMap</code> is called only stick around as long as you are playing in the map.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">UEngine</span><span class="o">::</span><span class="n">LoadMap</span><span class="p">(</span><span class="n">FWorldContext</span><span class="o">&amp;</span> <span class="n">WorldContext</span><span class="p">,</span> <span class="n">FURL</span> <span class="n">URL</span><span class="p">,</span> <span class="k">class</span> <span class="nc">UPendingNetGame</span><span class="o">*</span> <span class="n">Pending</span><span class="p">,</span> <span class="n">FString</span><span class="o">&amp;</span> <span class="n">Error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Let any interested parties know that the current world is about to be unloaded
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">FCoreUObjectDelegates</span><span class="o">::</span><span class="n">PreLoadMap</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">URL</span><span class="p">.</span><span class="n">Map</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* Omitted */</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// If there is already a loaded map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Destroy player-controlled Pawns and PlayerControllers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Route the EndPlay event to all actors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Clean up the world, destroy all actors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Cache the current time so we can report total duration post-load
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">double</span> <span class="n">StartTime</span> <span class="o">=</span> <span class="n">FPlatformTime</span><span class="o">::</span><span class="n">Seconds</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Notify the GameInstance of the map change in case it wants to load assets
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">WorldContext</span><span class="p">.</span><span class="n">OwningGameInstance</span><span class="o">-&gt;</span><span class="n">PreloadContentForURL</span><span class="p">(</span><span class="n">URL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Load our persistent level&#39;s map package and get the top-level UWorld
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">UPackage</span><span class="o">*</span> <span class="n">WorldPackage</span> <span class="o">=</span> <span class="n">LoadPackage</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="o">*</span><span class="n">URL</span><span class="p">.</span><span class="n">Map</span><span class="p">,</span> <span class="n">LOAD_None</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">UWorld</span><span class="o">*</span> <span class="n">NewWorld</span> <span class="o">=</span> <span class="n">UWorld</span><span class="o">::</span><span class="n">FindWorldInPackage</span><span class="p">(</span><span class="n">WorldPackage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// Give the world a reference to the GameInstance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">NewWorld</span><span class="o">-&gt;</span><span class="n">SetGameInstance</span><span class="p">(</span><span class="n">WorldContext</span><span class="p">.</span><span class="n">OwningGameInstance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">GWorld</span> <span class="o">=</span> <span class="n">NewWorld</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Take the raw, just-loaded UWorld and get it ready for gameplay
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">WorldContext</span><span class="p">.</span><span class="n">SetCurrentWorld</span><span class="p">(</span><span class="n">NewWorld</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">WorldContext</span><span class="p">.</span><span class="n">World</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">WorldType</span> <span class="o">=</span> <span class="n">WorldContext</span><span class="p">.</span><span class="n">WorldType</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">WorldContext</span><span class="p">.</span><span class="n">World</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">AddToRoot</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">WorldContext</span><span class="p">.</span><span class="n">World</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">InitWorld</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">WorldContext</span><span class="p">.</span><span class="n">World</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetGameMode</span><span class="p">(</span><span class="n">URL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>UEngine::LoadMap()</code> takes in an parameter called <code>WorldContext</code>, which is created by the <code>GameInstance</code> during <strong>Engine Initialization</strong> and is essentially a persistnet object that keeps track of whichever world is loaded up at the moment.</p>
<p>Before anything else gets loaded the <code>GameInstance</code> has a chance to <strong>preload</strong> any assets that it might want.</p>
<p><img src="/p/ue-framework-from-int-main-to-beginplay/3.JPG"
	width="1502"
	height="809"
	srcset="/p/ue-framework-from-int-main-to-beginplay/3_huaf34fbf3356fec395b028e0610cff063_134252_480x0_resize_q75_box.JPG 480w, /p/ue-framework-from-int-main-to-beginplay/3_huaf34fbf3356fec395b028e0610cff063_134252_1024x0_resize_q75_box.JPG 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="185"
		data-flex-basis="445px"
	
>
During <code>LoadMap()</code>, the engine finds the map package and loads it. At this point, the World, its persistent level, and the actors in the level including the WorldSettings, have been loaded back into memory.</p>
<p>The engine gives the <code>World</code> a reference to the <code>GameInstance</code>, and then initialized a global <code>GWorld</code> variable with a reference to the World.</p>
<p>Then the World is installed into the <code>WorldContext</code>. It has its World type initialized to game. And it&rsquo;s added to the root set, which prevents it from being garbage collected. <code>InitWorld</code> allows the world to set up systems like physics, navigation, AI and audio. When <code>SetGameMode()</code> is called, the World asks the <code>GameInstance</code> to create a<code>GameMode</code> in the world. Once the <code>GameMode</code> exists, the engine fully loads the map, meaning any always-loaded sublevels are loaded in, along with any referenced assets.</p>
<h3 id="initializeactorsforplay">InitializeActorsForPlay()</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UWorld</span><span class="o">::</span><span class="n">InitializeActorsForPlay</span><span class="p">(</span><span class="k">const</span> <span class="n">FURL</span><span class="o">&amp;</span> <span class="n">InURL</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bResetTime</span><span class="p">,</span> <span class="n">FRegisterComponentContext</span><span class="o">*</span> <span class="n">Context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Register all actor components in the persistent level only.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PersistentLevel</span><span class="o">-&gt;</span><span class="n">UpdateLevelComponents</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span> <span class="n">Context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Set bActorsInitialized so that future actors will be initialized on spawn.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">bActorsInitialized</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Initialize the GameMode: this spawns an AGameSession
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">AuthorityGameMode</span><span class="o">-&gt;</span><span class="n">InitGame</span><span class="p">(</span><span class="n">FPaths</span><span class="o">::</span><span class="n">GetBaseFilename</span><span class="p">(</span><span class="n">InURL</span><span class="p">.</span><span class="n">Map</span><span class="p">),</span> <span class="n">ParseOptions</span><span class="p">(</span><span class="n">InURL</span><span class="p">),</span> <span class="n">Error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">    <span class="c1">// Route InitializeComponents (and PreInit/PostInit) to all actors, level-by-level.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span><span class="p">(</span><span class="n">ULevel</span><span class="o">*</span> <span class="nl">Level</span> <span class="p">:</span> <span class="n">Levels</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Level</span><span class="o">-&gt;</span><span class="n">RouteActorInitialize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Let others know the actors are initialized. There are two versions here for convenience.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">FActorsInitializedParams</span> <span class="nf">OnActorInitParams</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">bResetTime</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">OnActorsInitialized</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">OnActorInitParams</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">FWorldDelegates</span><span class="o">::</span><span class="n">OnWorldInitializedActors</span><span class="p">.</span><span class="n">Broadcast</span><span class="p">(</span><span class="n">OnActorInitParams</span><span class="p">);</span> <span class="c1">// Global notification	
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UActorComponent</span><span class="o">::</span><span class="n">RegisterComponentWithWorld</span><span class="p">(</span><span class="n">UWorld</span><span class="o">*</span> <span class="n">InWorld</span><span class="p">,</span> <span class="n">FRegisterComponentContext</span><span class="o">*</span> <span class="n">Context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Give a reference to the world that the Component has been loaded into.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">WorldPrivate</span> <span class="o">=</span> <span class="n">InWorld</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Call the component&#39;s OnRegister() funtion, giving it a chance to do any early initialization.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">bRegistered</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">OnRegister</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">FApp</span><span class="o">::</span><span class="n">CanEverRender</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">bRenderStateCreated</span> <span class="o">&amp;&amp;</span> <span class="n">WorldPrivate</span><span class="o">-&gt;</span><span class="n">Scene</span> <span class="o">&amp;&amp;</span> <span class="n">ShouldCreateRenderState</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CreateRenderState_Concurrent</span><span class="p">(</span><span class="n">Context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">CreatePhysicsState</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">oid</span> <span class="n">FRegisterComponentContext</span><span class="o">::</span><span class="n">Process</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">FSceneInterface</span><span class="o">*</span> <span class="n">Scene</span> <span class="o">=</span> <span class="n">World</span><span class="o">-&gt;</span><span class="n">Scene</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">ParallelFor</span><span class="p">(</span><span class="n">AddPrimitiveBatches</span><span class="p">.</span><span class="n">Num</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="n">int32</span> <span class="n">Index</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">AddPrimitiveBatches</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">IsPendingKill</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Scene</span><span class="o">-&gt;</span><span class="n">AddPrimitive</span><span class="p">(</span><span class="n">AddPrimitiveBatches</span><span class="p">[</span><span class="n">Index</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="o">!</span><span class="n">FApp</span><span class="o">::</span><span class="n">ShouldUseThreadingForPerformance</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">AddPrimitiveBatches</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first loop registers all ActorComponents with the world. Every ActorComponent within every Actor is registered, which does 3 important things for the component:</p>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/gamedev/">GameDev</a>
        
            <a href="/tags/unrealengine/">UnrealEngine</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 NekoRAM7
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#game-loop">Game Loop</a></li>
    <li><a href="#launch">Launch</a></li>
    <li><a href="#genginelooppreinit">`GEngineLoop.PreInit()</a>
      <ol>
        <li><a href="#load-sequence">Load SequenceÔºö</a>
          <ol>
            <li><a href="#1-loadcoremodules">1. LoadCoreModules</a></li>
            <li><a href="#2-loadpreinitmodules">2. LoadPreInitModules</a></li>
            <li><a href="#3-project--plugin-early-loading">3. Project &amp; Plugin (Early Loading)</a></li>
            <li><a href="#4-loadstartupcoremodules">4. LoadStartupCoreModules</a></li>
            <li><a href="#5-project--plugin-default-point">5. Project &amp; Plugin (Default Point)</a></li>
          </ol>
        </li>
        <li><a href="#module-loading-process">Module Loading Process</a></li>
      </ol>
    </li>
    <li><a href="#gengineloopinit">GEngineLoop.Init()</a>
      <ol>
        <li><a href="#create-instance-of-ugameengine">Create Instance of UGameEngine</a></li>
        <li><a href="#initialize-gengine">Initialize GEngine</a></li>
        <li><a href="#initialize-any-late-loaded-modules">Initialize any late-loaded modules</a></li>
        <li><a href="#load-map">Load Map</a></li>
      </ol>
    </li>
    <li><a href="#engine-initialization">Engine Initialization</a>
      <ol>
        <li><a href="#load-map-1">Load Map</a></li>
        <li><a href="#initializeactorsforplay">InitializeActorsForPlay()</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
